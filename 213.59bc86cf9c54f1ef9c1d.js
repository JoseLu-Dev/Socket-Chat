(self.webpackChunksocket_io_chat_frontend=self.webpackChunksocket_io_chat_frontend||[]).push([[213],{6213:(e,t,n)=>{"use strict";n.r(t),n.d(t,{ChatsModule:()=>w});var s=n(1116),i=n(8619),r=n(1235),c=n(1462);let a=(()=>{class e{transform(e,...t){if(!e||!e.length)return;if(1==e.length)return`${e[0].name}#${e[0].id} is typing`;let n="";return e.forEach((t,s)=>{s==e.length-1&&(n+=" and "),n+=`${t.name}#${e[0].id}`,s!=e.length-1&&(n+=", ")}),n+=" are typing",n}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=i.Yjl({name:"areTyping",type:e,pure:!0}),e})();const o=["chat"];function l(e,t){if(1&e&&(i.TgZ(0,"div"),i.TgZ(1,"p",25),i._uU(2),i.qZA(),i.qZA()),2&e){const e=i.oxw().$implicit;i.xp6(2),i.AsE("",e.sender.name,"#",e.sender.id,"")}}function g(e,t){1&e&&(i.TgZ(0,"div",28),i._UZ(1,"div",29),i.qZA())}function d(e,t){1&e&&(i.O4$(),i.TgZ(0,"svg",30),i._UZ(1,"path",31),i._UZ(2,"path",32),i.qZA())}function h(e,t){if(1&e&&(i.TgZ(0,"div"),i.YNc(1,g,2,0,"div",26),i.YNc(2,d,3,0,"ng-template",null,27,i.W1O),i.qZA()),2&e){const e=i.MAs(3),t=i.oxw().$implicit;i.xp6(1),i.Q6J("ngIf",!t.sended)("ngIfElse",e)}}const p=function(e,t){return{"mr-auto":e,"ml-auto":t}},u=function(e,t){return{"bg-secondary":e,"bg-tertiary":t}};function f(e,t){if(1&e&&(i.TgZ(0,"div",19),i.TgZ(1,"div",20),i.YNc(2,l,3,2,"div",21),i.TgZ(3,"div",22),i.TgZ(4,"p",23),i._uU(5),i.qZA(),i.YNc(6,h,4,2,"div",21),i.qZA(),i.qZA(),i.TgZ(7,"p",24),i._uU(8),i.qZA(),i.qZA()),2&e){const e=t.$implicit,n=i.oxw();i.Q6J("ngClass",i.WLB(7,p,e.sender.id!=n.chatService.getUserId(),e.sender.id==n.chatService.getUserId())),i.xp6(1),i.Q6J("ngClass",i.WLB(10,u,e.sender.id!=n.chatService.getUserId(),e.sender.id==n.chatService.getUserId())),i.xp6(1),i.Q6J("ngIf",e.sender.id!=n.chatService.getUserId()),i.xp6(3),i.Oqu(e.content),i.xp6(1),i.Q6J("ngIf",e.sender.id==n.chatService.getUserId()),i.xp6(2),i.AsE("",e.date.getHours(),":",e.date.getMinutes(),"")}}let Z=(()=>{class e{constructor(e,t){this.chatService=e,this.location=t,this.message="",this.messages=this.chatService.getMessages(),this.usersTyping=this.chatService.getUsersTyping()}ngOnInit(){this.scrollChatToBottom()}ngAfterViewChecked(){const e=this.chatContainer.nativeElement,t=e.scrollHeight-e.clientHeight-e.scrollTop;0!=t&&t<150&&this.scrollChatToBottom()}sendMessage(){this.message&&(this.chatService.sendMessage(this.message),this.message="",this.scrollChatToBottom())}goBack(){this.location.back()}scrollChatToBottom(){setTimeout(()=>{try{this.chatContainer.nativeElement.scrollTop=this.chatContainer.nativeElement.scrollHeight}catch(e){console.log(e)}})}onMessageChanged(e){this.message=e,this.chatService.typingMessage()}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(r.a),i.Y36(s.Ye))},e.\u0275cmp=i.Xpm({type:e,selectors:[["app-chats"]],viewQuery:function(e,t){if(1&e&&i.Gf(o,5),2&e){let e;i.iGM(e=i.CRH())&&(t.chatContainer=e.first)}},decls:25,vars:9,consts:[[1,"flex","flex-col","bg-secondary","h-screen"],[1,"flex","bg-primary","p-3","relative"],[1,"absolute","left-3"],[3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24",1,"w-6","h-6","mt-1","fill-current","text-tertiary"],["d","M0 0h24v24H0V0z","fill","none","opacity",".87"],["d","M16.62 2.99c-.49-.49-1.28-.49-1.77 0L6.54 11.3c-.39.39-.39 1.02 0 1.41l8.31 8.31c.49.49 1.28.49 1.77 0s.49-1.28 0-1.77L9.38 12l7.25-7.25c.48-.48.48-1.28-.01-1.76z"],[1,"mx-auto","text-tertiary","text-lg","font-bold"],["id","chat",1,"flex","flex-col","gap-2","flex-grow","rounded-b-3xl","bg-primary","p-4","overflow-y-auto"],["chat",""],["id","message-card","class","flex-col flex-wrap gap-1",3,"ngClass",4,"ngFor","ngForOf"],[1,"px-4","pt-4"],[1,"flex","gap-4","p-2","bg-tertiary","rounded-2xl"],["id","message-input","autofocus","true","placeholder","Write a message here",1,"flex-grow","bg-transparent","text-white","placeholder-primary",3,"ngModel","ngModelChange","keyup.enter"],["id","send-button",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24",1,"w-6","h-6","fill-current","text-secondary"],["d","M0 0h24v24H0z","fill","none"],["d","M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"],[1,"h-6","animate-pulse","text-sm","pb-1","px-2","font-light"],["id","message-card",1,"flex-col","flex-wrap","gap-1",3,"ngClass"],[1,"rounded-xl","p-2","flex","flex-col","gap-2",3,"ngClass"],[4,"ngIf"],[1,"flex"],[1,"text-justify"],[1,"text-right","text-xs","mr-1"],[1,"text-blue","text-sm"],["class","relative w-4 h-4 mt-2",4,"ngIf","ngIfElse"],["sended",""],[1,"relative","w-4","h-4","mt-2"],[1,"spinner"],["xmlns","http://www.w3.org/2000/svg","height","24px","viewBox","0 0 24 24","width","24px","fill","#000000"],["d","M0 0h24v24H0V0z","fill","none"],["d","M9 16.2l-3.5-3.5c-.39-.39-1.01-.39-1.4 0-.39.39-.39 1.01 0 1.4l4.19 4.19c.39.39 1.02.39 1.41 0L20.3 7.7c.39-.39.39-1.01 0-1.4-.39-.39-1.01-.39-1.4 0L9 16.2z"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0),i.TgZ(1,"div",1),i.TgZ(2,"div",2),i.TgZ(3,"button",3),i.NdJ("click",function(){return t.goBack()}),i.O4$(),i.TgZ(4,"svg",4),i._UZ(5,"path",5),i._UZ(6,"path",6),i.qZA(),i.qZA(),i.qZA(),i.kcU(),i.TgZ(7,"div",7),i._uU(8,"Chat"),i.qZA(),i.qZA(),i.TgZ(9,"div",8,9),i.YNc(11,f,9,13,"div",10),i.ALo(12,"async"),i.qZA(),i.TgZ(13,"div",11),i.TgZ(14,"div",12),i.TgZ(15,"input",13),i.NdJ("ngModelChange",function(e){return t.onMessageChanged(e)})("keyup.enter",function(){return t.sendMessage()}),i.qZA(),i.TgZ(16,"button",14),i.NdJ("click",function(){return t.sendMessage()}),i.O4$(),i.TgZ(17,"svg",15),i._UZ(18,"path",16),i._UZ(19,"path",17),i.qZA(),i.qZA(),i.qZA(),i.kcU(),i.TgZ(20,"div",18),i.TgZ(21,"p"),i._uU(22),i.ALo(23,"areTyping"),i.ALo(24,"async"),i.qZA(),i.qZA(),i.qZA(),i.qZA()),2&e&&(i.xp6(11),i.Q6J("ngForOf",i.lcZ(12,3,t.messages)),i.xp6(4),i.Q6J("ngModel",t.message),i.xp6(7),i.Oqu(i.lcZ(23,5,i.lcZ(24,7,t.usersTyping))))},directives:[s.sg,c.Fj,c.JJ,c.On,s.mk,s.O5],pipes:[s.Ov,a],styles:["#message-card[_ngcontent-%COMP%]{max-width:80%}#chat[_ngcontent-%COMP%]{scroll-behavior:smooth}"]}),e})();var m=n(8384);const v=[{path:"",component:Z}];let x=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({imports:[[m.Bz.forChild(v)],m.Bz]}),e})(),w=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({imports:[[s.ez,x,c.u5]]}),e})()}}]);